#
# Copyright (c) 2022 Robert Bosch Manufacturing Solutions GmbH, Germany. All rights reserved.
#

@prefix : <urn:bamm:com.bosch.bci.digitalcv.instance:0.0.4#>.
@prefix type: <urn:bamm:com.bosch.bci.digitalcv.type:0.0.4#> .
@prefix bamm: <urn:bamm:io.openmanufacturing:meta-model:2.0.0#> .
@prefix bamm-c: <urn:bamm:io.openmanufacturing:characteristic:2.0.0#> .
@prefix bamm-e: <urn:bamm:io.openmanufacturing:entity:2.0.0#> .
@prefix unit: <urn:bamm:io.openmanufacturing:unit:2.0.0#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix dcv: <urn:bamm:com.bosch.bci.digitalcv:0.0.2#> .
@prefix equip: <urn:bamm:com.bosch.bci.digitalcv.equipment:0.0.1#>.

:ProcessParameters a bamm:Aspect ;
    bamm:preferredName "Process Parameters"@en ;
    bamm:description "Aspect for process parameters for processed parts."@en ;
    bamm:properties ( :items ) ;
    bamm:operations ( ) .

:items a bamm:Property ;
    bamm:preferredName "Parameters"@en ;
    bamm:preferredName "Parameter"@de ;
    bamm:description "A list of process parameters in chronological order."@en ;
    bamm:description "Eine Liste mit chronologisch sortierten Parameter."@de ;
    bamm:characteristic [
        a bamm-c:SortedSet ;
        bamm:dataType :ProcessParameter
    ] .

:ProcessParameter a bamm:Entity ;
    bamm:preferredName "Process Parameter"@en ;
    bamm:preferredName "Prozess-Parameter"@de ;
    bamm:description "Process parameter with value."@en ;
    bamm:properties (   :partIdentifier
                        :stationName
                        :processParameterDetails
                        :locationAddress ) .

:stationName a bamm:Property ;
             bamm:preferredName "Station Name"@en ;
             bamm:description "Name of station location string"@en ;
             bamm:characteristic :StationName  .

:StationName a bamm-c:Trait ;
                  bamm:see <https://inside-docupedia.bosch.com/confluence/x/o00cbg> ;
                  bamm-c:baseCharacteristic [
                        a bamm-c:Code ;
                        bamm:preferredName "Equipment Address"@en ;
                        bamm:dataType xsd:string
                    ] ;
                  bamm-c:constraint [
                        a bamm-c:RegularExpressionConstraint ;
                        bamm:value "[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9](?:\\.[a-zA-Z0-9]{0,4}(?:\\.[a-zA-Z0-9]{0,4}))"
                    ] .

:locationAddress a bamm:Property;
                 bamm:description: "The address of the process parameter";
                 bamm:characteristic equip:EquipmentAddressEntity .

:partIdentifier a bamm:Property;
                 bamm:description: "The reference to the identifying Part" ;
                 bamm:characteristic :PartIdentifierEntity .

:PartIdentifierEntity  a bamm-c:SingleEntity ;
                        bamm:dataType :PartIdentifier .

:PartIdentifier a bamm:Entity ;
                  bamm:preferredName "Equipment Address"@en ;
                  bamm:description "Address of an equipment."@en ;
                  bamm:properties ( :processedPartId
                                    type:materialNumber ) .

:processParameterDetails a bamm:Property;
                  bamm:description "The parameters of the process" ;
                  bamm:characteristic :ProcessParameterDetailsEntity .

:ProcessParameterDetailsEntity a bamm-c:SingleEntity ;
                       bamm:dataType :ProcessParameterDetails .

:ProcessParameterDetails a bamm:Entity;
                  bamm:preferredName "Process parameter"@en ;
                  bamm:description "The parameters of a process" ;
                  bamm:properties(   :serialNumber
                                     :processTime
                                     dcv:processName
                                     :parameterName
                                     :parameterValue
                                     [ bamm:property :unitOfMeasure ; bamm:optional true ]
                                     :paramDataType
                                     :paramMinTolerance
                                     :paramMaxTolerance
                                     :paramValueResult ) .

:parameterName a bamm:Property ;
    bamm:preferredName "Parameter Name"@en ;
    bamm:description "Name of process parameter"@en ;
    bamm:characteristic bamm-c:Text .

:parameterValue a bamm:Property ;
    bamm:preferredName "Parameter Value"@en ;
    bamm:description "Value of process parameter"@en ;
    bamm:characteristic bamm-c:Text .

:unitOfMeasure a bamm:Property ;
    bamm:preferredName "Unit of Measure"@en ;
    bamm:description "Unit of measure of this parameter"@en ;
    bamm:characteristic bamm-c:UnitReference .

:paramDataType a bamm:Property ;
    bamm:preferredName "Parameter Data Type"@en ;
    bamm:description "Data type of parameter"@en ;
    bamm:characteristic bamm-c:Text .

:paramMinTolerance a bamm:Property ;
    bamm:preferredName "Parameter Minimum Tolerance"@en ;
    bamm:description "Minimum tolerance of parameter"@en ;
    bamm:characteristic :Tolerance .

:paramMaxTolerance a bamm:Property ;
    bamm:preferredName "Parameter Maximum Tolerance"@en ;
    bamm:description "Maximum tolerance of parameter"@en ;
    bamm:characteristic :Tolerance .

:Tolerance a bamm-c:Quantifiable ;
    bamm:dataType xsd:float ;
    bamm-c:unit unit:piece .

:processTime a bamm:Property ;
    bamm:preferredName "Process Date and Time"@en ;
    bamm:description "Date and time, when the part was processed"@en ;
    bamm:characteristic bamm-c:Timestamp .

:paramValueResult a bamm:Property ;
    bamm:preferredName "Result State"@en ;
    bamm:description "Result state of part in the manufacturing if part is ok or nok in the current process step"@en ;
    bamm:characteristic :ResultState .