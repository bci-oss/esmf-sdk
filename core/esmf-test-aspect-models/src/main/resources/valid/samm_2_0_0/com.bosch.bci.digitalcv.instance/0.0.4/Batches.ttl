#
# Copyright (c) 2022 Robert Bosch Manufacturing Solutions GmbH, Germany. All rights reserved.
#

@prefix : <urn:bamm:com.bosch.bci.digitalcv.instance:0.0.4#>.
@prefix type: <urn:bamm:com.bosch.bci.digitalcv.type:0.0.4#>.
@prefix bamm: <urn:bamm:io.openmanufacturing:meta-model:2.0.0#> .
@prefix bamm-c: <urn:bamm:io.openmanufacturing:characteristic:2.0.0#> .
@prefix bamm-e: <urn:bamm:io.openmanufacturing:entity:2.0.0#> .
@prefix unit: <urn:bamm:io.openmanufacturing:unit:2.0.0#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

:Batches a bamm:Aspect ;
    bamm:preferredName "Batches"@en ;
    bamm:preferredName "Batches"@de ;
    bamm:description "Aspect for batches of a certain product type."@en ;
    bamm:description "Aspekt welcher die Chargen eines gewissen Produkttyps liefert"@de ;
    bamm:properties ( :items ) ;
    bamm:operations ( ) .

:items a bamm:Property ;
    bamm:preferredName "Batches"@en ;
    bamm:preferredName "Chargen"@de ;
    bamm:description "A list of batches sorted in chronological order."@en ;
    bamm:description "Eine Liste mit chronologisch sortierten Chargen."@de ;
    bamm:characteristic [
        a bamm-c:SortedSet ;
        bamm:dataType :Batch
    ] .

:Batch a bamm:Entity ;
    bamm:preferredName "Batch"@en ;
    bamm:preferredName "Charge"@de ;
    bamm:description "Definition of a batch based on a MES batch number."@en ;
    bamm:properties ( :batchNumber
                      [ bamm:property :batchDescription; bamm:optional true ]
                      [ bamm:property :startTime; bamm:optional true ]
                      [ bamm:property :endTime; bamm:optional true ]
#                     [ bamm:property :batchOrigin; bamm:optional true ]
                      [ bamm:property :quantity; bamm:optional true ]
                      type:materialNumber
                      type:materialDescription
                      :isProductBatch ) .


:startTime a bamm:Property ;
    bamm:preferredName "Start Time"@en ;
    bamm:description "Date and time, when the batch was started"@en ;
    bamm:characteristic bamm-c:Timestamp .

:endTime a bamm:Property ;
    bamm:preferredName "End Time"@en ;
    bamm:description "Date and time, when the last part of the batch was produced"@en ;
    bamm:characteristic bamm-c:Timestamp .

:batchOrigin a bamm:Property ;
    bamm:preferredName "Batch Origin"@en ;
    bamm:description "Who has defined the identifier of the batch own company or supplier"@en ;
    bamm:characteristic :BatchOrigin .

:BatchOrigin a bamm-c:Enumeration ;
    bamm:preferredName "Batch Origin"@en ;
    bamm:description "Origin of a batch"@en ;
    bamm:dataType :OriginEntity ;
    bamm-c:values ( :OwnOrigin :SupplierOrigin ) .

:OriginEntity a bamm:Entity ;
    bamm:preferredName "Origin Entity"@en ;
    bamm:description "Entity that describes a batch origin."@en ;
    bamm:properties ( :batchOriginAttributeValue
                      [ bamm:property     :batchOriginAttributeDescription ;
                      bamm:notInPayload "true"^^xsd:boolean ] ) .

:batchOriginAttributeValue a bamm:Property ;
    bamm:preferredName "Batch Origin Attribute Value"@en ;
    bamm:description "The value representing a specific origin of a batch."@en ;
    bamm:characteristic [
        a bamm-c:Code ;
        bamm:dataType xsd:string
    ] .

:batchOriginAttributeDescription a bamm:Property ;
    bamm:preferredName "Batch Origin Attribute Description"@en ;
    bamm:description "The description for a specific origin of a batch."@en ;
    bamm:characteristic bamm-c:MultiLanguageText .

:OwnOrigin a :OriginEntity ;
    :batchOriginAttributeValue "own"^^xsd:string ;
    :batchOriginAttributeDescription "Batch defined by company itself" .

:SupplierOrigin a :OriginEntity ;
    :batchOriginAttributeValue "supplier"^^xsd:string ;
    :batchOriginAttributeDescription "Batch defined by supplier"@en .

:quantity a bamm:Property ;
    bamm:preferredName "Quantity"@en ;
    bamm:description "Quantity of instances in batch"@en ;
    bamm:characteristic :Quantity .

:Quantity a bamm-c:Quantifiable ;
    bamm:dataType xsd:float ;
    bamm-c:unit unit:piece .

:isProductBatch a bamm:Property ;
    bamm:preferredName "isProductBatch"@en ;
    bamm:description "Indicates whether the batch produced product instances or parts."@en ;
    bamm:characteristic bamm-c:Boolean .
