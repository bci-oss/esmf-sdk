#
# Aspect model for product
# format turtle https://www.w3.org/TeamSubmission/turtle
#
@prefix :       <urn:bamm:com.bosch.bci.digitalcv.instance:0.0.3#>.
@prefix bamm:   <urn:bamm:io.openmanufacturing:meta-model:1.0.0#> .
@prefix bamm-c: <urn:bamm:io.openmanufacturing:characteristic:1.0.0#> .
@prefix bamm-e: <urn:bamm:io.openmanufacturing:entity:1.0.0#> .
@prefix unit:   <urn:bamm:io.openmanufacturing:unit:1.0.0#> .
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#> .
@prefix dcv-type: <urn:bamm:com.bosch.bci.digitalcv.type:0.0.3#> .

:ProcessParameters
    a                  bamm:Aspect ;
    bamm:name          "ProcessParameters" ;
    bamm:preferredName "Process Parameters"@en ;
    bamm:description   "Aspect for process parameters for processed parts."@en ;
    bamm:properties    ( :items ) ;
    bamm:operations    ( ) .

:items
    a                   bamm:Property ;
    bamm:name           "items" ;
    bamm:preferredName  "Parameters"@en ;
    bamm:preferredName  "Parameter"@de ;
    bamm:description    "A list of process parameters in chronological order."@en ;
    bamm:description    "Eine Liste mit chronologisch sortierten Parameter."@de ;
    bamm:characteristic [ a             bamm-c:SortedSet ;
                          bamm:name     "ProcessParameter" ;
                          bamm:dataType :ProcessParameter ] .

:ProcessParameter
    a                  bamm:Entity ;
    bamm:name          "ProcessParameter" ;
    bamm:preferredName "Process Parameter"@en ;
    bamm:preferredName "Prozess-Parameter"@de ;
    bamm:description   "Process parameter with value."@en ;
    bamm:properties    ( :processedPartId
                         :serialNumber
                         :processTime
                         :stationName
                         [ bamm:property :processName ; bamm:optional true ]
                         :parameterName
                         :parameterValue
                         [ bamm:property :unitOfMeasure ; bamm:optional true ]
                         :paramDataType
                         :paramMinTolerance
                         :paramMaxTolerance
                         :paramValueResult
                         dcv-type:materialNumber
                       ) .

:stationName
    a                   bamm:Property ;
    bamm:name           "stationName" ;
    bamm:preferredName  "Station Name"@en ;
    bamm:description    "Name of station location string"@en ;
    bamm:characteristic :EquipmentAddress .

:EquipmentAddress
    a                         bamm-c:Trait ;
    bamm:name                 "EquipmentAddressConstraint" ;
    bamm:see                  <https://inside-docupedia.bosch.com/confluence/x/o00cbg> ;
    bamm-c:baseCharacteristic [ a                  bamm-c:Code ;
                                bamm:name          "LocationString" ;
                                bamm:preferredName "Equipment Address"@en ;
                                bamm:dataType      xsd:string ] ;
    bamm-c:constraint         [ a          bamm-c:RegularExpressionConstraint ;
                                bamm:name  "EquipmentAddressPattern" ;
                                bamm:value "[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9]{1,4}\\.[a-zA-Z0-9](?:\\.[a-zA-Z0-9]{0,4}(?:\\.[a-zA-Z0-9]{0,4}))" ] .

:processName
    a                   bamm:Property ;
    bamm:name           "processName" ;
    bamm:preferredName  "Process Name"@en ;
    bamm:description    "Name of process"@en ;
    bamm:characteristic bamm-c:Text .

:parameterName
    a                   bamm:Property ;
    bamm:name           "parameterName" ;
    bamm:preferredName  "Parameter Name"@en ;
    bamm:description    "Name of process parameter"@en ;
    bamm:characteristic bamm-c:Text .

:parameterValue
    a                   bamm:Property ;
    bamm:name           "parameterValue" ;
    bamm:preferredName  "Parameter Value"@en ;
    bamm:description    "Value of process parameter"@en ;
    bamm:characteristic bamm-c:Text .

:unitOfMeasure
    a                   bamm:Property ;
    bamm:name           "unitOfMeasure" ;
    bamm:preferredName  "Unit of Measure"@en ;
    bamm:description    "Unit of measure of this parameter"@en ;
    bamm:characteristic bamm-c:UnitReference .

:paramDataType
    a                   bamm:Property ;
    bamm:name           "paramDataType" ;
    bamm:preferredName  "Parameter Data Type"@en ;
    bamm:description    "Data type of parameter"@en ;
    bamm:characteristic bamm-c:Text .

:paramMinTolerance
    a                   bamm:Property ;
    bamm:name           "paramMinTolerance" ;
    bamm:preferredName  "Parameter Minimum Tolerance"@en ;
    bamm:description    "Minimum tolerance of parameter"@en ;
    bamm:characteristic :Tolerance .

:paramMaxTolerance
    a                   bamm:Property ;
    bamm:name           "paramMaxTolerance" ;
    bamm:preferredName  "Parameter Maximum Tolerance"@en ;
    bamm:description    "Maximum tolerance of parameter"@en ;
    bamm:characteristic :Tolerance .

:Tolerance
    a bamm-c:Quantifiable ;
    bamm:name "Tolerance" ;
    bamm:dataType xsd:float ;
    bamm-c:unit unit:piece .

:processTime
    a                   bamm:Property ;
    bamm:name           "processTime" ;
    bamm:preferredName  "Process Date and Time"@en ;
    bamm:description    "Date and time, when the part was processed"@en ;
    bamm:characteristic bamm-c:Timestamp .

:paramValueResult
    a                   bamm:Property ;
    bamm:name           "paramValueResult" ;
    bamm:preferredName  "Result State"@en ;
    bamm:description    "Result state of part in the manufacturing if part is ok or nok in the current process step"@en ;
    bamm:characteristic :ResultState .
